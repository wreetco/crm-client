<!doctype html>

<div class="card" id="contact-post-card" style="display:none;">
  <div class="row">
    <div class="col s12">
      <h3>
        Contact Create
      </h3>
      <div class="row">
        <div ng-repeat="field in current_fields">
          <div class="col s12 m6">
            <input  id="{{ field.db_name }}" type="text" ng-model="contact.record[field.db_name]">
            <label for="{{ field.db_name }}">{{ field.name }}</label>
          </div>
        </div>
      </div>
      <div class="row">
        <h4>
          Tags
        </h4>
        <div id="chip-section-post">
          <input placeholder="+Tag" type="text" id="new-tag-post">
        </div>
      </div>
      <div class="row">
        <div class="col s6 m4 offset-m4">
          <a class="waves-effect btn" ng-click="postRecord();"><i class="material-icons right">send</i>Save</a>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  $( "#new-tag-post" ).keypress(function(e) {
    if(e.keyCode === 13 || e.keyCode === 44){
      var tag_name = $('#new-tag-post').val();
      var tag_id = '#tag-id-post-' + tag_name;
      if(document.getElementById(tag_id)) {

      } else {
        $("<div class=\"chip\" id=\"" + tag_id + "\">" + tag_name + " <i class=\"close material-icons\">close</i>").insertBefore('#new-tag-post');
      }
      setTimeout(function(){
        $('#new-tag-post').val('');
      }, 99);
    }
  });
</script>
